package controller

import (
	controller "app.com/controller"
	response "github.com/livebud/bud/runtime/controller/response"
	http "net/http"
)

// Controller struct
type Controller struct {
	Index *IndexAction
}

// IndexAction struct
type IndexAction struct {
}

// Key is a unique identifier of this action
func (i *IndexAction) Key() string {
	return "/index"
}

// Path is the default RESTful path to this action
func (i *IndexAction) Path() string {
	return "/"
}

// Method is the default RESTful method of this action
func (i *IndexAction) Method() string {
	return "GET"
}

// ServeHTTP fn
func (i *IndexAction) ServeHTTP(w http.ResponseWriter, r *http.Request) {
	i.handler(r).ServeHTTP(w, r)
}

// Handler function
func (i *IndexAction) handler(httpRequest *http.Request) http.Handler {
	controllerController := loadController()
	fn := controllerController.Index
	// Call the controller
	in0 := fn()

	// Respond
	return &response.Format{
		HTML: response.HTML(in0),
		JSON: response.JSON(in0),
	}
}

func loadController() *controller.Controller {
	controllerController := &controller.Controller{}
	return controllerController
}
