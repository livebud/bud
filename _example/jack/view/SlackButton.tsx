import env from "../lib/env"

const SLACK_CLIENT_ID = env.SLACK_CLIENT_ID
const SLACK_SCOPE = env.SLACK_SCOPE
const SLACK_USER_SCOPE = env.SLACK_USER_SCOPE
const href = `https://slack.com/oauth/v2/authorize?client_id=${SLACK_CLIENT_ID}&scope=${SLACK_SCOPE}&user_scope=${SLACK_USER_SCOPE}`

type SlackButtonProps = {
  jingle?: boolean
  success?: boolean
}

export default function SlackButton({ jingle, success }: SlackButtonProps) {
  if (success) {
    return <SuccessSlackButton />
  }

  return (
    <a class="SlackButton" href={href}>
      <svg
        class="logo"
        data-jingle={jingle}
        width="23"
        height="23"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g fill-rule="nonzero" fill="none">
          <g fill="#E01E5A">
            <path d="M5.1 14.4c0 1.3-1 2.3-2.3 2.3-1.3 0-2.3-1-2.3-2.3 0-1.3 1-2.3 2.3-2.3h2.3v2.3zM6.3 14.4c0-1.3 1-2.3 2.3-2.3 1.3 0 2.3 1 2.3 2.3v5.8c0 1.3-1 2.3-2.3 2.3-1.3 0-2.3-1-2.3-2.3v-5.8z" />
          </g>
          <g fill="#36C5F0">
            <path d="M8.6 5.2c-1.3 0-2.3-1-2.3-2.3 0-1.3 1-2.3 2.3-2.3 1.3 0 2.3 1 2.3 2.3v2.3H8.6zM8.6 6.3c1.3 0 2.3 1 2.3 2.3 0 1.3-1 2.3-2.3 2.3H2.8c-1.3 0-2.3-1-2.3-2.3 0-1.3 1-2.3 2.3-2.3h5.8z" />
          </g>
          <g fill="#2EB67D">
            <path d="M17.9 8.7c0-1.3 1-2.3 2.3-2.3 1.3 0 2.3 1 2.3 2.3 0 1.3-1 2.3-2.3 2.3h-2.3V8.7zM16.7 8.7c0 1.3-1 2.3-2.3 2.3-1.3 0-2.3-1-2.3-2.3V2.9c0-1.3 1-2.3 2.3-2.3 1.3 0 2.3 1 2.3 2.3v5.8z" />
          </g>
          <g fill="#ECB22E">
            <path d="M14.4 17.9c1.3 0 2.3 1 2.3 2.3 0 1.3-1 2.3-2.3 2.3-1.3 0-2.3-1-2.3-2.3v-2.3h2.3zM14.4 16.8c-1.3 0-2.3-1-2.3-2.3 0-1.3 1-2.3 2.3-2.3h5.8c1.3 0 2.3 1 2.3 2.3 0 1.3-1 2.3-2.3 2.3h-5.8z" />
          </g>
        </g>
      </svg>

      <svg
        class="text"
        width="125"
        height="13"
        xmlns="http://www.w3.org/2000/svg"
      >
        <g fill="#000" fill-rule="evenodd">
          <path
            d="M93.6 4.2c-.1-.6-.6-1.6-2.1-1.6-1.1 0-1.8.7-1.8 1.4 0 .6.4 1.1 1.2 1.3l1.6.3c2.1.4 3.2 1.7 3.2 3.3 0 1.7-1.5 3.5-4.1 3.5-3 0-4.3-1.9-4.5-3.6l2-.5c.1 1.1.9 2.1 2.5 2.1 1.2 0 1.8-.6 1.8-1.4 0-.7-.5-1.2-1.4-1.3l-1.6-.3c-1.8-.4-3-1.5-3-3.2 0-2 1.8-3.6 4-3.6 2.8 0 3.8 1.7 4.1 2.9l-1.9.7zM97 12.2V.6h2.1v11.6zM102.7 7.7l1.9-.3c.4-.1.6-.3.6-.6 0-.6-.4-1-1.3-1s-1.4.6-1.5 1.3l-1.9-.4c.1-1.2 1.3-2.6 3.4-2.6 2.5 0 3.4 1.4 3.4 3V11c0 .4 0 1 .1 1.2h-2c0-.2-.1-.6-.1-.9-.4.6-1.2 1.2-2.3 1.2-1.7 0-2.7-1.1-2.7-2.4 0-1.5 1.1-2.2 2.4-2.4zm2.5 1.3v-.4l-1.8.3c-.5.1-1 .4-1 1 0 .5.3.9 1 .9 1 0 1.8-.4 1.8-1.8zM110.5 8.3c0 1.4.9 2.2 2 2.2s1.6-.7 1.8-1.3l1.9.6c-.4 1.3-1.6 2.7-3.7 2.7-2.3 0-4.1-1.8-4.1-4.2 0-2.4 1.8-4.2 4.1-4.2 2.1 0 3.4 1.3 3.7 2.7l-1.9.6c-.2-.7-.7-1.3-1.7-1.3-1.2 0-2.1.7-2.1 2.2zM121.7 7.6l3.2 4.6h-2.6l-2.1-3-.9.9v2.1h-2.1V.6h2.1v6.6l2.7-2.9h2.8z"
            fill-rule="nonzero"
          />
          <path d="M32 8.485792l2.159675-.389716v1.05548c.010826.595402.165087 1.031122.462788 1.307172.2977.27605.673881.414073 1.128552.414073.476322 0 .849796-.151555 1.120433-.454668.270637-.303114.405954-.709064.405954-1.217862V1.243572h2.240866v7.956699c0 .519623-.08931 1.00947-.26793 1.469553-.17862.460084-.433016.863327-.763193 1.209743-.330178.346416-.725302.619755-1.185386.820027-.460083.200272-.97158.300406-1.534506.300406-.573751 0-1.09066-.089309-1.550744-.26793-.460084-.17862-.855208-.433016-1.185386-.763193-.330177-.330178-.584573-.725302-.763193-1.185386C32.089309 10.323408 32 9.811911 32 9.248985v-.763193zm9.336942 2.094722c0-.357241.062245-.673882.186739-.949932.124493-.27605.294992-.516914.511502-.722598.21651-.205685.468198-.368065.755074-.487145.286876-.11908.598104-.205683.933694-.25981l1.964818-.292287c.227335-.032477.384302-.100135.470906-.202977.086604-.102843.129905-.224628.129905-.36536 0-.281462-.11096-.525032-.332882-.730716-.221922-.205685-.560214-.308525-1.014885-.308525-.476322 0-.841676.129904-1.096076.389716-.254399.259811-.397834.56292-.43031.909337l-1.916104-.405954c.032477-.31394.129905-.627874.292287-.941814.162383-.31394.384302-.595398.665765-.844384.281463-.248986.627873-.451961 1.039242-.608931s.887683-.235453 1.428958-.235453c.627879 0 1.163733.083896 1.607578.251691.443845.167795.803787.389715 1.079838.665765.27605.27605.476318.598103.600811.96617.124494.368067.18674.752366.18674 1.15291v3.929634c0 .21651.010825.446548.032476.690122.02165.243574.043301.435723.064952.576455h-1.981055c-.021651-.108255-.040596-.257104-.056834-.44655-.016238-.189446-.024357-.359945-.024357-.511502-.205684.31394-.500675.589986-.88498.828146-.384305.238161-.874151.35724-1.469553.35724-.422194 0-.803787-.067659-1.14479-.202977-.341003-.135319-.630581-.313937-.868742-.53586-.23816-.221922-.419485-.476317-.543978-.763193-.124494-.286875-.18674-.587279-.18674-.901218zm3.198917.79567c.227336 0 .446549-.02977.657646-.08931.211097-.05954.397834-.16238.560216-.308525.162383-.146144.292287-.335587.389716-.568335.09743-.232749.146144-.527739.146144-.88498v-.35724l-1.802436.276049c-.281463.043302-.516914.143436-.70636.300406s-.284168.39242-.284168.70636c0 .23816.086603.451961.25981.641407.173209.189446.433017.284168.779432.284168zm9.596753-4.85521c-.281463 0-.543978.048714-.787551.146144-.243574.09743-.457374.240865-.641407.430311-.184034.189446-.330176.424897-.43843.70636-.108256.281463-.162382.60081-.162382.958051 0 .357242.054126.676589.162381.958052.108255.281463.257103.51962.44655.714479.189446.194859.405952.341.649526.43843.243574.09743.506088.146143.78755.146143.270638 0 .511502-.040594.722599-.121786.211097-.08119.392421-.186738.543978-.316644.151557-.129906.273342-.276048.365359-.43843.092016-.162383.159675-.31935.202977-.470907l1.899864.633288c-.086603.33559-.23004.663057-.43031.98241-.200272.319351-.457374.606222-.771313.860622-.31394.254399-.682.46008-1.104195.61705-.422194.15697-.898509.235453-1.428958.235453-.584577 0-1.133962-.105547-1.648173-.316644-.514211-.211097-.960756-.506087-1.339649-.88498-.378892-.378892-.676589-.825437-.893098-1.339648-.21651-.514211-.324764-1.079835-.324764-1.696888 0-.617053.105547-1.185383.316645-1.705006.211097-.519624.50338-.96617.87686-1.339649.37348-.37348.811906-.665763 1.315291-.87686.503386-.211097 1.047359-.316644 1.631935-.316644.541275 0 1.025708.078483 1.453315.235453.427608.15697.798375.359945 1.112314.60893.31394.248987.568335.535859.763194.860623.194859.324765.335588.654938.422192.990528l-1.932341.649527c-.09743-.33559-.284166-.644113-.560217-.925576-.27605-.281462-.679293-.422192-1.209742-.422192zm9.889039 1.607578l3.26387 4.627876h-2.64682l-2.11096-3.052774-.8931.941813v2.11096h-2.159675V1h2.159675v6.738836l2.760488-2.971583h2.82544l-3.198918 3.3613z" />
          <path
            d="M8.5 9h-5l-1.2 3.2H.6L5.1.9h1.8l4.5 11.3H9.7L8.5 9zM4 7.6h3.9l-2-5.1L4 7.6zM17.7 11c-.4.7-1.2 1.4-2.4 1.4-2.3 0-3.6-1.8-3.6-4.1 0-2.2 1.5-4 3.6-4 1.4 0 2.1.7 2.4 1.3v-5h1.5v10.2c0 .7.1 1.3.1 1.4h-1.5c0-.2-.1-.6-.1-1V11zm-2.3.1c1.4 0 2.2-1.2 2.2-2.8 0-1.6-.8-2.7-2.2-2.7-1.4 0-2.3 1.1-2.3 2.7.1 1.6.9 2.8 2.3 2.8zM26.5 11c-.4.7-1.2 1.4-2.4 1.4-2.3 0-3.6-1.8-3.6-4.1 0-2.2 1.5-4 3.6-4 1.4 0 2.1.7 2.4 1.3v-5H28v10.2c0 .7.1 1.3.1 1.4h-1.5c0-.2-.1-.6-.1-1V11zm-2.3.1c1.4 0 2.2-1.2 2.2-2.8 0-1.6-.8-2.7-2.2-2.7-1.4 0-2.3 1.1-2.3 2.7.1 1.6.9 2.8 2.3 2.8zM73.7 4.5h1.7v1.4h-1.7v4c0 .7.3 1.1 1.1 1.1.2 0 .5 0 .6-.1v1.3c-.1 0-.5.1-1 .1-1.3 0-2.1-.8-2.1-2.2V5.9h-1.5V4.5h.4c.8 0 1.2-.5 1.2-1.2V2.1h1.4v2.4h-.1zM83.8 8.3c0 2.4-1.6 4.1-3.9 4.1S76 10.7 76 8.3c0-2.3 1.6-4.1 3.9-4.1 2.3.1 3.9 1.8 3.9 4.1zm-1.5 0c0-1.8-1.1-2.7-2.4-2.7-1.3 0-2.4 1-2.4 2.7 0 1.8 1.1 2.8 2.4 2.8 1.3 0 2.4-1 2.4-2.8z"
            fill-rule="nonzero"
          />
        </g>
      </svg>
    </a>
  )
}

function SuccessSlackButton() {
  return (
    <button class="SlackButton-success" disabled>
      <span className="checkmark" />
      <span className="text">See you on Slack!</span>
    </button>
  )
}
